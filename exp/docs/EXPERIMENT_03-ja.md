# EXPERIMENT_03 (Golay符号による取り出し性能評価)

## 概要
本実験では文字列マークのビット列に Golay 符号 (23,12) を適用し、冗長化 (約1.9倍) による誤り訂正が取り出し性能に与える影響を評価した。Golay 符号は 1 ブロック 23bit 中最大 3bit までの誤り訂正が可能で、理論的にはブロック単位で 13% 程度の訂正余地がある。

## 背景
従来 (EXPERIMENT_01/02) の評価では生ビット列を直接埋め込み・抽出し、EmbedCount (総ブロック数 / マークビット数) や D1/D2 パラメータによる成功率を比較していた。今回は誤り訂正符号を導入することで、低 EmbedCount や条件の悪い D1/D2 における取り出し精度向上を狙った。

## 目的
1. Golay 符号化によるビット抽出成功率の改善度合いを把握する。
2. エンコード後 (冗長ビット列) の一致率と、デコード後 (元ビット列) の最終成功率の差異を観察する。
3. 誤り分布がランダム想定と乖離している可能性を探索するための次ステップを整理する。

## 実験方法 (概要)
- 画像サイズ複数 (例: 854x480 〜 256x144) と複数の BlockShape, D1/D2 組み合わせで埋め込み・抽出。
- Golay (23,12) により元メッセージを符号化し、抽出結果をデコードして元ビット列と比較。
- 成功判定は「エンコード後一致率 100% または デコード後一致率 100%」を成功と計上。

## 主な観察結果
- 一定の改善が確認でき、例として 10 枚目の画像においてサイズ 854x480 条件で失敗数が約半減した。
- エンコード済みビット列で 90% 超の一致を達成しても、デコード後に 100% へ到達しないケースが存在した。
  - 理論上は各 23bit ブロック中 3bit まで訂正可能であるため、ランダム誤りであれば高一致率から完全復元できる期待がある。
  - 実際には誤りが特定ブロックに集中・偏在し、3bit を超過するブロックが発生して訂正不能になっている可能性が高い。
- EmbedCount と D1/D2 を軸にした成功率比較を体系化しないと、改善度を条件間で定量評価しづらい。

## 考察
- Golay 符号導入は「広く薄く散らばる誤り」に対して有効だが、「局所的に密集する誤り」には限界がある。
- 現状の失敗例はブロック誤り数が 3 を超える集中型パターンの比率が一定あることを示唆する。
- 誤りの空間分布 (画像領域ごとの偏り) や Golay ブロック境界との相関を可視化することで、符号化戦略 (例: ブロック再配列 / interleaving) の最適化余地がある。

## 次の取り組み (Future Work)
1. 誤り位置ヒートマップの生成 (Encodedビットインデックス→画像座標対応付け)。
2. Golay ブロック単位での誤り数ヒストグラム出力と、集中度指標 (例: Gini係数) の算出。
3. EmbedCount vs 成功率 (Encoded/Decoded) を D1/D2 パラメータごとに整理した 2D/3D プロット。
4. Interleaving (符号ビットを空間的に分散) を導入した再評価。
5. 他の誤り訂正符号 (BCH, LDPC の軽量設定) の比較検討。

## まとめ
- Golay 符号化により取り出し性能は一定向上したが、完全復元できないケースが残存し、誤り分布の非ランダム性が示唆された。
- 今後は誤り分布の可視化とパラメータ別の体系的評価を進め、集中誤りへの耐性を高めるための符号化/配置戦略を検討する。

---
本ドキュメントは yyyoichi のもと GPT-5 によって文書化されました。
